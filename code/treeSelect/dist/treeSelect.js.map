{"version":3,"sources":["../treeSelect.js"],"names":[],"mappings":"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","file":"treeSelect.js","sourcesContent":["var uid=0;\nclass TreeSelect{\n    static getUniquId(){\n       return uid++;\n    }\n    constructor(options){\n        var self=this;\n\n        var defaultOptions={\n            valueKey:'id'\n        }\n        self.options=options=$.extend(defaultOptions,options);\n        var uid=TreeSelect.getUniquId();\n        var tpl=`\n            <input type=\"text\" class=\"form-control treeSelect-input \"/>\n             <div class=\"ztree treeSelect-panel\" id=\"treeSelect_panel_${uid}\"></div>\n        `;\n        var ele=$(options.element);\n        ele.html(tpl);\n        var input=ele.find('.treeSelect-input');\n        var panel=ele.find('.treeSelect-panel');\n        self.element=ele;\n        self.input=input;\n        self.panel=panel;\n        ele.css({\n            'position':'relative'\n        });\n        input.on('keydown',function(){\n\n            //input.val(self.text);\n            return false;\n        });\n        input.click(function(){\n            if(!self.isOpen()){\n                self.open();\n            }else{\n                self.close();\n            }\n\n        })\n        if(options.url){\n            $.ajax({\n                type: options.type,\n                url: options.url,\n                dataType:'json',\n                data:options.param,\n                sucess:function(data){\n                    self.render(data);\n                }\n            })\n        }else if(options.data){\n            self.render(options.data);\n        }\n    }\n\n    isOpen(){\n        var panel=this.panel;\n        return   !(panel.css('display')=='none'||panel.height()==0||panel.css('opacity')==0)\n    }\n    render(data){\n        var self=this;\n        var panel=self.panel;\n        var setting={\n            callback:{\n                onClick:function(event, treeId, treeNode){\n                    if(!treeNode.isParent){\n                        self.input.val(treeNode.name);\n                        self.value=treeNode[self.options.valueKey];\n                        self.text=treeNode.name;\n                        self.close();\n                    }\n\n                }\n            }\n        };\n        self.ztree=$.fn.zTree.init(panel, setting, data);\n    }\n    open(){\n        var self=this;\n        var panel=self.panel;\n        panel.css({\n            height:'auto',\n            opacity:1\n        });\n        panel.show();\n        self.mask=$('<div class=\"treeSelect-mask\"></div>');\n        $('body').append(self.mask);\n        self.mask.click(function(){\n            self.close();\n        })\n    }\n    close(){\n\n        var self=this;\n        //panel.animate({\n        //    height:0,\n        //    opacity:0\n        //},500);\n        self.panel.hide();\n        self.mask.remove();\n    }\n\n}"]}